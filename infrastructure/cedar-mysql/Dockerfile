#ubuntu:jammy
FROM mysql:8
#
# Mysql version
#                          8.0.27
#
# Latest

ARG CEDAR_MYSQL_ROOT_PASSWORD
ENV CEDAR_MYSQL_ROOT_PASSWORD         ${CEDAR_MYSQL_ROOT_PASSWORD}

ARG CEDAR_KEYCLOAK_MYSQL_USER
ENV CEDAR_KEYCLOAK_MYSQL_USER         ${CEDAR_KEYCLOAK_MYSQL_USER}
ARG CEDAR_KEYCLOAK_MYSQL_PASSWORD
ENV CEDAR_KEYCLOAK_MYSQL_PASSWORD     ${CEDAR_KEYCLOAK_MYSQL_PASSWORD}
ARG CEDAR_KEYCLOAK_MYSQL_DB
ENV CEDAR_KEYCLOAK_MYSQL_DB           ${CEDAR_KEYCLOAK_MYSQL_DB}

ARG CEDAR_MESSAGING_MYSQL_USER
ENV CEDAR_MESSAGING_MYSQL_USER        ${CEDAR_MESSAGING_MYSQL_USER}
ARG CEDAR_MESSAGING_MYSQL_PASSWORD
ENV CEDAR_MESSAGING_MYSQL_PASSWORD    ${CEDAR_MESSAGING_MYSQL_PASSWORD}
ARG CEDAR_MESSAGING_MYSQL_DB
ENV CEDAR_MESSAGING_MYSQL_DB          ${CEDAR_MESSAGING_MYSQL_DB}

ARG CEDAR_LOG_MYSQL_USER
ENV CEDAR_LOG_MYSQL_USER              ${CEDAR_LOG_MYSQL_USER}
ARG CEDAR_LOG_MYSQL_PASSWORD
ENV CEDAR_LOG_MYSQL_PASSWORD          ${CEDAR_LOG_MYSQL_PASSWORD}
ARG CEDAR_LOG_MYSQL_DB
ENV CEDAR_LOG_MYSQL_DB                ${CEDAR_LOG_MYSQL_DB}

ENV MYSQL_DATA_DIR /var/lib/mysql
ENV MYSQL_LOG_DIR  /var/log/mysql
ENV MYSQL_SOCK_DIR /var/run/mysqld

ENV MYSQL_SCRIPTS_DIR /opt/mysql/scripts
ADD scripts ${MYSQL_SCRIPTS_DIR}
#RUN ${MYSQL_SCRIPTS_DIR}/install.sh
#RUN ${MYSQL_SCRIPTS_DIR}/configure.sh

EXPOSE 3306

ENTRYPOINT ${MYSQL_SCRIPTS_DIR}/docker-entrypoint.sh

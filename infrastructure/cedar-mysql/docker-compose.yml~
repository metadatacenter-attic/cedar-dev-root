version: '3.6'
services:

   mysql:
    container_name: mysql
    image: "cedar-mysql:${CEDAR_DOCKER_VERSION}"
    build:
        context: ${CEDAR_HOME}/cedar-docker-build/infrastructure/cedar-mysql
        args:
           CEDAR_MYSQL_ROOT_PASSWORD:           ${CEDAR_MYSQL_ROOT_PASSWORD}

           CEDAR_KEYCLOAK_MYSQL_USER:           ${CEDAR_KEYCLOAK_MYSQL_USER}
           CEDAR_KEYCLOAK_MYSQL_PASSWORD:       ${CEDAR_KEYCLOAK_MYSQL_PASSWORD}
           CEDAR_KEYCLOAK_MYSQL_DB:             ${CEDAR_KEYCLOAK_MYSQL_DB}

           CEDAR_MESSAGING_MYSQL_USER:          ${CEDAR_MESSAGING_MYSQL_USER}
           CEDAR_MESSAGING_MYSQL_PASSWORD:      ${CEDAR_MESSAGING_MYSQL_PASSWORD}
           CEDAR_MESSAGING_MYSQL_DB:            ${CEDAR_MESSAGING_MYSQL_DB}

           CEDAR_LOG_MYSQL_USER:                ${CEDAR_LOG_MYSQL_USER}
           CEDAR_LOG_MYSQL_PASSWORD:            ${CEDAR_LOG_MYSQL_PASSWORD}
           CEDAR_LOG_MYSQL_DB:                  ${CEDAR_LOG_MYSQL_DB}

    networks:
      - cedarnet
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

networks:
  cedarnet:
    external:
      name: cedarnet

volumes:
  neo4j_log:
    name: neo4j_log
  neo4j_data:
    name: neo4j_data
  neo4j_state:
    name: neo4j_state
  elasticsearch_log:
    name: elasticsearch_log
  elasticsearch_data:
    name: elasticsearch_data
  redis_log:
    name: redis_log
  redis_data:
    name: redis_data
  mongo_log:
    name: mongo_log
  mongo_data:
    name: mongo_data
  mongo_state:
    name: mongo_state
  mysql_log:
    name: mysql_log
  mysql_data:
    name: mysql_data
  mysql_sock:
    name: mysql_sock
  keycloak_log:
    name: keycloak_log
  nginx_log:
    name: nginx_log
  cedar_cert:
    name: cedar_cert
